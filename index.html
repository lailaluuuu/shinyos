<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ShinyOS ¬∑ Learn Like It's A Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <!-- Top bar -->
    <header class="top-bar">
      <div class="brand">
        <div class="logo-mark">‚óé</div>
        <div class="logo-text">
          <span class="logo-main">ShinyOS</span>
          <span class="logo-sub">operating system for your brain</span>
        </div>
      </div>
      <div class="top-bar-metrics">
        <div class="metric metric--level">
          <span class="metric-label">Level</span>
          <span class="metric-value" id="levelValue">3</span>
        </div>
        <div class="metric metric--xp">
          <span class="metric-label">XP</span>
          <span class="metric-value" id="xpValue">120</span>
          <div class="xp-progress-mini">
            <div class="xp-progress-fill-mini" id="xpProgressMini"></div>
          </div>
        </div>
        <div class="metric metric--streak">
          <span class="metric-label">streak</span>
          <span class="metric-value">üî• <span id="streakValue">3</span></span>
        </div>
        <div class="metric metric--today">
          <span class="metric-label">today</span>
          <span class="metric-value" id="todayGoal">2/5</span>
        </div>
      </div>
    </header>

    <!-- Main layout -->
    <main class="layout">
      <!-- Left: world / subjects -->
      <section class="world-panel">
        <div class="world-header">
          <h2>üó∫Ô∏è Learning Atlas</h2>
          <p class="world-subtitle">
            Pick any topic and start learning. Every lesson brings you closer to mastery.
          </p>
        </div>

        <div class="world-map">
          <!-- Era ring -->
          <div class="era-pill">
            <span class="era-dot"></span>
            <span id="eraPillLabel">Foundations Era</span>
          </div>

          <!-- Breadcrumb navigation -->
          <div class="breadcrumb" id="breadcrumb">
            <button class="breadcrumb-item is-active" onclick="window.showCategories && window.showCategories()">üó∫Ô∏è Categories</button>
            <span class="breadcrumb-separator" id="breadcrumbSeparator" style="display: none;"> ‚Üí </span>
            <span class="breadcrumb-current" id="breadcrumbCurrent"></span>
          </div>

          <!-- Category folders (shown by default) -->
          <div class="world-grid" id="categoryGrid">
            <!-- Categories will be dynamically populated by JS -->
          </div>

          <!-- Subject grid (shown when category is selected) -->
          <div class="world-grid is-hidden" id="subjectGrid">
            <!-- Subjects will be dynamically populated by JS -->
          </div>
        </div>
      </section>

      <!-- Right: lesson / journal / missions -->
      <section class="lesson-panel">
        <div class="lesson-tabs">
          <button class="tab is-active" data-tab="lesson">Lesson</button>
          <button class="tab" data-tab="journal">Journal</button>
          <button class="tab" data-tab="missions">Missions</button>
        </div>

        <div class="lesson-card" id="lessonCard">
          <div class="lesson-chip-row">
            <span class="chip chip--subject" id="subjectChip">Economics ¬∑ Markets</span>
            <span class="chip chip--unit" id="unitChip">Unit: Planned Economies</span>
          </div>

          <h1 class="lesson-title" id="lessonTitle">Planned Economies</h1>
          <p class="lesson-subtitle" id="lessonSubtitle">
            When the state takes the steering wheel of the market.
          </p>

          <div class="lesson-progress">
            <div class="lesson-progress-top">
              <span>Lesson progress</span>
              <span id="lessonProgressLabel">1 / 4</span>
            </div>
            <div class="lesson-progress-bar">
              <div class="lesson-progress-fill" id="lessonProgressFill" style="width: 25%;"></div>
            </div>
          </div>

          <!-- Content container -->
          <div class="lesson-body">
            <div id="lessonContent">
              <!-- Filled by JS -->
            </div>
          </div>

          <!-- Quiz area -->
          <div class="quiz-block" id="quizBlock">
            <!-- Filled by JS -->
          </div>

          <!-- Footer: XP etc -->
          <div class="lesson-footer">
            <div class="footer-left">
              <span class="xp-pill">‚≠ê +<span id="pendingXp">0</span> XP</span>
              <span class="hint-text" id="hintText">Tap an answer to check your understanding.</span>
            </div>
            <div class="footer-buttons">
              <button class="back-btn" id="backBtn" onclick="window.goBackDirect && window.goBackDirect();" style="display: none;">‚Üê Back</button>
              <button class="next-btn" id="nextBtn" onclick="window.goNextDirect && window.goNextDirect(); console.log('INLINE ONCLICK FIRED!');">Continue</button>
            </div>
          </div>
        </div>

        <!-- Journal placeholder -->
        <div class="journal-panel is-hidden" id="journalPanel">
          <h2>Your Atlas Page</h2>
          <p class="journal-text" id="journalText">
            This is where your stamps, diagrams, and one-line notes for this topic will live.
          </p>
        </div>

        <!-- Missions placeholder -->
        <div class="missions-panel is-hidden" id="missionsPanel">
          <h2>Simulation Mission</h2>
          <p class="journal-text" id="missionsText">
            Soon: you‚Äôll be able to run a tiny simulation and watch your city change as you make decisions.
          </p>
        </div>
      </section>
    </main>
  </div>

  <!-- Celebration overlay -->
  <div class="celebration-overlay" id="celebrationOverlay">
    <div class="celebration-content">
      <div class="celebration-icon" id="celebrationIcon">üéâ</div>
      <div class="celebration-text" id="celebrationText">Awesome!</div>
      <div class="celebration-xp" id="celebrationXpText">+8 XP</div>
    </div>
  </div>

  <!-- Achievement notification -->
  <div class="achievement-popup" id="achievementPopup">
    <div class="achievement-icon">üèÜ</div>
    <div class="achievement-content">
      <div class="achievement-title" id="achievementTitle">Achievement Unlocked!</div>
      <div class="achievement-desc" id="achievementDesc">Knowledge Seeker</div>
    </div>
  </div>

  <!-- Level up overlay -->
  <div class="level-up-overlay" id="levelUpOverlay">
    <div class="level-up-content">
      <div class="level-up-number" id="levelUpNumber">4</div>
      <div class="level-up-text">Level Up!</div>
      <button class="level-up-continue">Continue</button>
    </div>
  </div>

  <!-- Confetti canvas -->
  <canvas id="confettiCanvas" class="confetti-canvas"></canvas>

  <!-- Creature Reaction System -->
  <div id="creature-reaction-root"></div>

  <script src="creatures.js"></script>
  <script src="app.js"></script>
</body>
</html>

