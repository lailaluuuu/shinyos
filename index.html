<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ShinyOS ¬∑ Learn Like It's A Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <!-- Top bar -->
    <header class="top-bar">
      <div class="brand">
        <div class="logo-mark">‚óé</div>
        <div class="logo-text">
          <span class="logo-main">ShinyOS</span>
          <span class="logo-sub">operating system for your brain</span>
        </div>
      </div>
      <div class="top-bar-metrics">
        <div class="metric metric--level">
          <span class="metric-label">Level</span>
          <span class="metric-value" id="levelValue">3</span>
        </div>
        <div class="metric metric--xp">
          <span class="metric-label">XP</span>
          <span class="metric-value" id="xpValue">120</span>
          <div class="xp-progress-mini">
            <div class="xp-progress-fill-mini" id="xpProgressMini"></div>
          </div>
        </div>
        <div class="metric metric--streak">
          <span class="metric-label">streak</span>
          <span class="metric-value">üî• <span id="streakValue">3</span></span>
        </div>
        <div class="metric metric--today">
          <span class="metric-label">today</span>
          <span class="metric-value" id="todayGoal">2/5</span>
        </div>
      </div>
    </header>

    <!-- Main layout -->
    <main class="layout">
      <!-- Left: world / subjects -->
      <section class="world-panel">
        <div class="world-header">
          <h2>üó∫Ô∏è Learning Atlas</h2>
          <p class="world-subtitle">
            Pick any topic and start learning. Every lesson brings you closer to mastery.
          </p>
        </div>

        <div class="world-map">
          <!-- Era ring -->
          <div class="era-pill">
            <span class="era-dot"></span>
            <span id="eraPillLabel">Foundations Era</span>
          </div>

          <!-- Breadcrumb navigation -->
          <div class="breadcrumb" id="breadcrumb">
            <button class="breadcrumb-item is-active" onclick="window.showCategories && window.showCategories()">üó∫Ô∏è Categories</button>
            <span class="breadcrumb-separator" id="breadcrumbSeparator" style="display: none;"> ‚Üí </span>
            <span class="breadcrumb-current" id="breadcrumbCurrent"></span>
          </div>

          <!-- Category folders (shown by default) -->
          <div class="world-grid" id="categoryGrid">
            <!-- Categories will be dynamically populated by JS -->
          </div>

          <!-- Subject grid (shown when category is selected) -->
          <div class="world-grid is-hidden" id="subjectGrid">
            <!-- Subjects will be dynamically populated by JS -->
          </div>
        </div>
      </section>

      <!-- Right: lesson / journal / missions -->
      <section class="lesson-panel">
        <div class="lesson-tabs">
          <button class="tab is-active" data-tab="lesson">Lesson</button>
          <button class="tab" data-tab="journal">Journal</button>
          <button class="tab" data-tab="missions">Missions</button>
        </div>

        <div class="lesson-card" id="lessonCard">
          <div class="lesson-chip-row">
            <span class="chip chip--subject" id="subjectChip">Economics ¬∑ Markets</span>
            <span class="chip chip--unit" id="unitChip">Unit: Planned Economies</span>
          </div>

          <h1 class="lesson-title" id="lessonTitle">Planned Economies</h1>
          <p class="lesson-subtitle" id="lessonSubtitle">
            When the state takes the steering wheel of the market.
          </p>

          <div class="lesson-progress">
            <div class="lesson-progress-top">
              <span>Lesson progress</span>
              <span id="lessonProgressLabel">1 / 4</span>
            </div>
            <div class="lesson-progress-bar">
              <div class="lesson-progress-fill" id="lessonProgressFill" style="width: 25%;"></div>
            </div>
          </div>

          <!-- Content container -->
          <div class="lesson-body">
            <div id="lessonContent">
              <!-- Filled by JS -->
            </div>
          </div>

          <!-- Quiz area -->
          <div class="quiz-block" id="quizBlock">
            <!-- Filled by JS -->
          </div>

          <!-- Footer: XP etc -->
          <div class="lesson-footer">
            <div class="footer-left">
              <span class="xp-pill">‚≠ê +<span id="pendingXp">0</span> XP</span>
              <span class="hint-text" id="hintText">Tap an answer to check your understanding.</span>
            </div>
            <button class="next-btn" id="nextBtn" onclick="window.goNextDirect && window.goNextDirect(); console.log('INLINE ONCLICK FIRED!');">Continue</button>
          </div>
        </div>

        <!-- Journal placeholder -->
        <div class="journal-panel is-hidden" id="journalPanel">
          <h2>Your Atlas Page</h2>
          <p class="journal-text" id="journalText">
            This is where your stamps, diagrams, and one-line notes for this topic will live.
          </p>
        </div>

        <!-- Missions placeholder -->
        <div class="missions-panel is-hidden" id="missionsPanel">
          <h2>Simulation Mission</h2>
          <p class="journal-text" id="missionsText">
            Soon: you‚Äôll be able to run a tiny simulation and watch your city change as you make decisions.
          </p>
        </div>
      </section>
    </main>
  </div>

  <!-- Celebration overlay -->
  <div class="celebration-overlay" id="celebrationOverlay">
    <div class="celebration-content">
      <div class="celebration-icon" id="celebrationIcon">üéâ</div>
      <div class="celebration-text" id="celebrationText">Awesome!</div>
      <div class="celebration-xp" id="celebrationXpText">+8 XP</div>
    </div>
  </div>

  <!-- Achievement notification -->
  <div class="achievement-popup" id="achievementPopup">
    <div class="achievement-icon">üèÜ</div>
    <div class="achievement-content">
      <div class="achievement-title" id="achievementTitle">Achievement Unlocked!</div>
      <div class="achievement-desc" id="achievementDesc">Knowledge Seeker</div>
    </div>
  </div>

  <!-- Level up overlay -->
  <div class="level-up-overlay" id="levelUpOverlay">
    <div class="level-up-content">
      <div class="level-up-number" id="levelUpNumber">4</div>
      <div class="level-up-text">Level Up!</div>
      <button class="level-up-continue">Continue</button>
    </div>
  </div>

  <!-- Confetti canvas -->
  <canvas id="confettiCanvas" class="confetti-canvas"></canvas>

  <!-- Blu Bot Character (SVG) -->
  <svg id="bluBotSVG" style="display: none;">
    <defs>
      <!-- Blu Bot celebrating -->
      <g id="blubot-celebrate">
        <!-- Body -->
        <rect x="40" y="60" width="40" height="50" fill="#4ea2ff" stroke="#2a5a8f" stroke-width="2" rx="2"/>
        <!-- Head -->
        <path d="M 35 30 L 85 30 L 85 60 L 35 60 Z" fill="#4ea2ff" stroke="#2a5a8f" stroke-width="2"/>
        <!-- Antenna -->
        <line x1="60" y1="30" x2="60" y2="20" stroke="#2a5a8f" stroke-width="2"/>
        <circle cx="60" cy="18" r="4" fill="#ffdd9a"/>
        <!-- Eyes (happy) -->
        <circle cx="50" cy="45" r="3" fill="#1a1a1a"/>
        <circle cx="70" cy="45" r="3" fill="#1a1a1a"/>
        <!-- Arms (raised) -->
        <rect x="25" y="65" width="12" height="30" fill="#4ea2ff" stroke="#2a5a8f" stroke-width="2" rx="2" transform="rotate(-30 31 65)"/>
        <rect x="83" y="65" width="12" height="30" fill="#4ea2ff" stroke="#2a5a8f" stroke-width="2" rx="2" transform="rotate(30 89 65)"/>
        <!-- Legs -->
        <rect x="45" y="110" width="10" height="25" fill="#4ea2ff" stroke="#2a5a8f" stroke-width="2"/>
        <rect x="65" y="110" width="10" height="25" fill="#4ea2ff" stroke="#2a5a8f" stroke-width="2"/>
        <!-- Feet -->
        <ellipse cx="50" cy="138" rx="8" ry="4" fill="#2a5a8f"/>
        <ellipse cx="70" cy="138" rx="8" ry="4" fill="#2a5a8f"/>
      </g>
      
      <!-- Blu Bot studying -->
      <g id="blubot-study">
        <!-- Body -->
        <rect x="40" y="60" width="40" height="50" fill="#4ea2ff" stroke="#2a5a8f" stroke-width="2" rx="2"/>
        <!-- Head -->
        <path d="M 35 30 L 85 30 L 85 60 L 35 60 Z" fill="#4ea2ff" stroke="#2a5a8f" stroke-width="2"/>
        <!-- Antenna -->
        <line x1="60" y1="30" x2="60" y2="20" stroke="#2a5a8f" stroke-width="2"/>
        <circle cx="60" cy="18" r="4" fill="#35c27e"/>
        <!-- Eyes (focused) -->
        <circle cx="50" cy="45" r="3" fill="#1a1a1a"/>
        <circle cx="70" cy="45" r="3" fill="#1a1a1a"/>
        <!-- Arms (holding book) -->
        <rect x="30" y="70" width="12" height="25" fill="#4ea2ff" stroke="#2a5a8f" stroke-width="2" rx="2"/>
        <rect x="78" y="70" width="12" height="25" fill="#4ea2ff" stroke="#2a5a8f" stroke-width="2" rx="2"/>
        <!-- Book -->
        <rect x="35" y="85" width="50" height="30" fill="#ff9a56" stroke="#2a5a8f" stroke-width="2" rx="2"/>
        <line x1="60" y1="85" x2="60" y2="115" stroke="#2a5a8f" stroke-width="2"/>
        <!-- Legs -->
        <rect x="45" y="110" width="10" height="25" fill="#4ea2ff" stroke="#2a5a8f" stroke-width="2"/>
        <rect x="65" y="110" width="10" height="25" fill="#4ea2ff" stroke="#2a5a8f" stroke-width="2"/>
        <!-- Feet -->
        <ellipse cx="50" cy="138" rx="8" ry="4" fill="#2a5a8f"/>
        <ellipse cx="70" cy="138" rx="8" ry="4" fill="#2a5a8f"/>
      </g>

      <!-- Blu Bot tired -->
      <g id="blubot-tired">
        <!-- Body (slouched) -->
        <rect x="40" y="70" width="40" height="50" fill="#4ea2ff" stroke="#2a5a8f" stroke-width="2" rx="2"/>
        <!-- Head (tilted) -->
        <path d="M 35 40 L 85 40 L 85 70 L 35 70 Z" fill="#4ea2ff" stroke="#2a5a8f" stroke-width="2" transform="rotate(-5 60 55)"/>
        <!-- Antenna -->
        <line x1="58" y1="38" x2="56" y2="28" stroke="#2a5a8f" stroke-width="2"/>
        <circle cx="55" cy="26" r="4" fill="#ff7b7b" opacity="0.5"/>
        <!-- Eyes (closed) -->
        <line x1="45" y1="55" x2="55" y2="55" stroke="#1a1a1a" stroke-width="2"/>
        <line x1="65" y1="55" x2="75" y2="55" stroke="#1a1a1a" stroke-width="2"/>
        <!-- Arms (down) -->
        <rect x="30" y="75" width="10" height="28" fill="#4ea2ff" stroke="#2a5a8f" stroke-width="2" rx="2"/>
        <rect x="80" y="75" width="10" height="28" fill="#4ea2ff" stroke="#2a5a8f" stroke-width="2" rx="2"/>
        <!-- Legs -->
        <rect x="45" y="120" width="10" height="18" fill="#4ea2ff" stroke="#2a5a8f" stroke-width="2"/>
        <rect x="65" y="120" width="10" height="18" fill="#4ea2ff" stroke="#2a5a8f" stroke-width="2"/>
        <!-- Feet -->
        <ellipse cx="50" cy="140" rx="8" ry="4" fill="#2a5a8f"/>
        <ellipse cx="70" cy="140" rx="8" ry="4" fill="#2a5a8f"/>
      </g>
    </defs>
  </svg>

  <script src="app.js"></script>
</body>
</html>

